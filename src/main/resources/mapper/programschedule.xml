<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sg.silvergarden.dao.programcal.ProgramScheduleMapper">

    <select id="getProgramSchedule" resultType="java.util.Map">
        SELECT
            PS_NO2,
            PS_NAME,
            TO_CHAR(PS_START, 'YYYY-MM-DD"T"HH24:MI:SS') AS PS_START,
            TO_CHAR(PS_END, 'YYYY-MM-DD"T"HH24:MI:SS') AS PS_END,
            PS_INFO,
            REG_ID,
            TO_CHAR(MOD_DATE, 'YYYY-MM-DD"T"HH24:MI:SS') AS MOD_DATE,
            TO_CHAR(REG_DATE, 'YYYY-MM-DD"T"HH24:MI:SS') AS REG_DATE
        FROM PROGRAM_SCHEDULE2
    </select>

    <insert id="addProgramSchedule" parameterType="java.util.Map">
        INSERT INTO PROGRAM_SCHEDULE2 (
            PS_NO2, PS_NAME, PS_START, PS_INFO, REG_ID, REG_DATE, PS_END)
        VALUES (
                PS_NO2_SEQUENCE.nextval,
                #{PS_NAME},
                TO_DATE(#{PS_START}, 'YYYY-MM-DD"T"HH24:MI:SS'),
                #{PS_INFO},
                #{REG_ID},
                sysdate,
                TO_DATE(#{PS_END}, 'YYYY-MM-DD"T"HH24:MI:SS')
                )
    </insert>

<!--    <update id="updateProgramSchedule" parameterType="java.util.Map">-->
<!--        UPDATE PROGRAM_SCHEDULE2-->
<!--        SET-->
<!--            PS_NAME = #{PS_NAME},-->
<!--            PS_START = TO_DATE(#{PS_START}, 'YYYY-MM-DD"T"HH24:MI:SS'),-->
<!--            PS_END = TO_DATE(#{PS_END}, 'YYYY-MM-DD"T"HH24:MI:SS'),-->
<!--            PS_INFO = #{PS_INFO},-->
<!--            REG_ID = #{REG_ID},-->
<!--            MOD_DATE = TO_DATE(sysdate, 'YYYY-MM-DD"T"HH24:MI:SS')-->
<!--        WHERE PS_NO2 = #{PS_NO2}-->
<!--    </update>-->
    <update id="updateProgramSchedule" parameterType="java.util.Map">
        UPDATE PROGRAM_SCHEDULE2
        SET
        <if test="PS_NAME != null">PS_NAME = #{PS_NAME},</if>
        <if test="PS_START != null">PS_START = TO_DATE(#{PS_START}, 'YYYY-MM-DD"T"HH24:MI:SS'),</if>
        <if test="PS_END != null">PS_END = TO_DATE(#{PS_END}, 'YYYY-MM-DD"T"HH24:MI:SS'),</if>
        <if test="PS_INFO != null">PS_INFO = #{PS_INFO},</if>
        <if test="REG_ID != null">REG_ID = #{REG_ID},</if>
        MOD_DATE = TO_DATE(sysdate, 'YYYY-MM-DD"T"HH24:MI:SS')
        WHERE PS_NO2 = #{PS_NO2}
    </update>


    <delete id="deleteProgramSchedule" parameterType="java.util.Map">
        DELETE FROM PROGRAM_SCHEDULE2 WHERE PS_NO2 = #{PS_NO2}
    </delete>
</mapper>
